{% load static %}
{% url 'events' as events_url %}
{% url 'places' as places_url %}
{% url 'index' as index_url %}
{% url 'reviews' as reviews_url %}
{% url 'gourmands' as gourmands_url %}
{% url 'contacts' as contacts_url %}

<div class="container">
  <div class="right_header_info fixed-top navbar-light bg-dark">
    <ul class="nav nav-tabs nav nav-link contact-info">
      <li class="nav-item button_user">
        <a class="button nav-link {% if request.path == index_url %}active{% endif %}" href="{% url 'index' %}">Главная</a>
      </li>
      <li class="nav-item button_user">
        <a class="button nav-link {% if request.path == events_url %}active{% endif %}" href="{% url 'events' %}">Афиша</a>
      </li>
      <li class="nav-item button_user">
        <a class="button nav-link {% if request.path == places_url %}active{% endif %}" href="{% url 'places' %}">Места</a>
      </li>
      <li class="nav-item button_user">
        <a class="button nav-link {% if request.path == gourmands_url %}active{% endif %}" href="{% url 'gourmands' %}">Гурманы</a>
      </li>
      <li class="nav-item button_user">
        <a class="button nav-link {% if request.path == reviews_url %}active{% endif %}" href="{% url 'reviews' %}">Отзывы</a>
      </li>
      <li class="nav-item button_user">
        <a class="button nav-link {% if request.path == contacts_url %}active{% endif %}" href="{% url 'contacts' %}">Контакты</a>
      </li>

      {% if request.user.is_authenticated %}
        <li class="nav-item button_user">
          <a class="button nav-link active" href="#">{{ request.user.username }}</a>
          <a class="button nav-link" href="{% url 'signout' %}">Выход</a>
        </li>
      {% else %}
        <li class="button_user">
          <a class="button nav-link" href="#" data-bs-toggle="modal" data-bs-target="#loginModal">Вход</a>
          <a class="button nav-link" href="#" data-bs-toggle="modal" data-bs-target="#registerModal">Регистрация</a>
        </li>
      {% endif %}
    </ul>
  </div>
</div>

<!-- Модальное окно Входа -->
<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content bg-dark text-white">
      <div class="modal-header">
        <h5 class="modal-title" id="loginModalLabel">Вход</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form method="POST" action="{% url 'signin' %}">
          {% csrf_token %}
          <div class="mb-3">
            <label for="username" class="form-label">Имя пользователя</label>
            <input type="text" class="form-control" id="username" name="username" required>
          </div>
          <div class="mb-3">
            <label for="password" class="form-label">Пароль</label>
            <input type="password" class="form-control" id="password" name="password" required>
          </div>
          <button type="submit" class="btn btn-primary w-100">Войти</button>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- Модальное окно Регистрации -->
<div class="modal fade" id="registerModal" tabindex="-1" aria-labelledby="registerModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content bg-dark text-white">
      <div class="modal-header">
        <h5 class="modal-title" id="registerModalLabel">Регистрация</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form method="POST" action="{% url 'signup' %}">
          {% csrf_token %}
          <div class="mb-3">
            <label for="reg-username" class="form-label">Имя пользователя</label>
            <input type="text" class="form-control" id="reg-username" name="username" required>
          </div>
          <div class="mb-3">
            <label for="reg-email" class="form-label">Email</label>
            <input type="email" class="form-control" id="reg-email" name="email" required>
          </div>
          <div class="mb-3">
            <label for="reg-password" class="form-label">Пароль</label>
            <input type="password" class="form-control" id="reg-password" name="password" required>
          </div>
          <button type="submit" class="btn btn-success w-100">Зарегистрироваться</button>
        </form>
      </div>
    </div>
  </div>
</div>
